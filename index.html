<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mental Health Triage</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
    margin: 0;
    background: #f6f7f9;
    color: #111;
  }
  .container {
    max-width: 800px;
    margin: auto;
    padding: 16px;
  }
  h1 {
    margin-top: 0;
  }
  .card {
    background: white;
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 12px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.08);
  }
  .question {
    font-weight: 600;
    margin-bottom: 12px;
  }
  .option {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
  }
  button {
    padding: 12px 16px;
    border-radius: 10px;
    border: none;
    font-size: 16px;
    cursor: pointer;
  }
  .primary {
    background: #111;
    color: white;
  }
  .secondary {
    background: #e5e5e5;
  }
  .disabled {
    background: #aaa;
    cursor: not-allowed;
  }
  .footer {
    font-size: 13px;
    opacity: 0.7;
    margin-top: 20px;
  }
</style>
</head>
<body>

<div class="container">
  <h1>Mental Health Triage</h1>
  <p>This tool is for educational purposes only and is not a diagnosis.</p>

  <div id="app"></div>

  <div class="footer">
    If you are in danger or thinking about harming yourself, please seek emergency help immediately.
  </div>
</div>

<script>
// === Questionnaire + scoring logic ===

const questions = [
  { text: "I feel nervous, anxious, or on edge", anxiety: 1, depression: 0 },
  { text: "I am unable to stop or control worrying", anxiety: 1, depression: 0 },
  { text: "I feel restless or on edge", anxiety: 1, depression: 0 },
  { text: "I feel down, depressed, or hopeless", anxiety: 0, depression: 1 },
  { text: "I have little interest or pleasure in doing things", anxiety: 0, depression: 1 },
  { text: "I feel tired or have little energy", anxiety: 0, depression: 1 },
  { text: "I have trouble sleeping", anxiety: 1, depression: 1 },
  { text: "I have trouble concentrating", anxiety: 1, depression: 1 },
];

const options = [
  { label: "Not at all", value: 0 },
  { label: "Several days", value: 1 },
  { label: "More than half the days", value: 2 },
  { label: "Nearly every day", value: 3 },
];

let answers = new Array(questions.length).fill(null);
let submitted = false;

function render() {
  const app = document.getElementById("app");
  app.innerHTML = "";

  if (!submitted) {
    questions.forEach((q, i) => {
      const card = document.createElement("div");
      card.className = "card";

      const qt = document.createElement("div");
      qt.className = "question";
      qt.textContent = `${i + 1}. ${q.text}`;
      card.appendChild(qt);

      options.forEach(opt => {
        const label = document.createElement("label");
        label.className = "option";

        const input = document.createElement("input");
        input.type = "radio";
        input.name = "q" + i;
        input.checked = answers[i] === opt.value;
        input.onchange = () => {
          answers[i] = opt.value;
          render();
        };

        label.appendChild(input);
        label.appendChild(document.createTextNode(opt.label));
        card.appendChild(label);
      });

      app.appendChild(card);
    });

    const allAnswered = answers.every(a => a !== null);

    const btn = document.createElement("button");
    btn.textContent = "See Results";
    btn.className = allAnswered ? "primary" : "primary disabled";
    btn.disabled = !allAnswered;
    btn.onclick = () => {
      submitted = true;
      render();
    };

    app.appendChild(btn);
  } else {
    // Calculate scores
    let anxietyScore = 0;
    let depressionScore = 0;

    answers.forEach((ans, i) => {
      anxietyScore += ans * questions[i].anxiety;
      depressionScore += ans * questions[i].depression;
    });

    let title = "";
    let text = "";

    if (anxietyScore > depressionScore + 2) {
      title = "Anxiety-dominant pattern";
      text = "Your answers suggest anxiety symptoms are more prominent. Consider stress management, therapy, and discussing treatment options with a clinician.";
    } else if (depressionScore > anxietyScore + 2) {
      title = "Depression-dominant pattern";
      text = "Your answers suggest depressive symptoms are more prominent. Consider speaking with a healthcare professional about therapy and/or medication options.";
    } else {
      title = "Mixed anxiety and depression pattern";
      text = "Your answers suggest a mix of anxiety and depressive symptoms. A comprehensive evaluation by a clinician may be helpful.";
    }

    const card = document.createElement("div");
    card.className = "card";

    card.innerHTML = `
      <h2>${title}</h2>
      <p><b>Anxiety score:</b> ${anxietyScore}</p>
      <p><b>Depression score:</b> ${depressionScore}</p>
      <p>${text}</p>
    `;

    app.appendChild(card);

    const btn = document.createElement("button");
    btn.textContent = "Start Over";
    btn.className = "secondary";
    btn.onclick = () => {
      answers = new Array(questions.length).fill(null);
      submitted = false;
      render();
    };

    app.appendChild(btn);
  }
}

render();
</script>

</body>
</html>
